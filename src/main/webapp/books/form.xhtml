<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	  	xmlns:h="http://xmlns.jcp.org/jsf/html"
	  	xmlns:f="http://xmlns.jcp.org/jsf/core"
	  	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	 	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	 	xmlns:jsf="http://xmlns.jcp.org/jsf"
	 	template="/WEB-INF/templates/layout-admin.xhtml">
	
	<ui:define name="content">
		<main>
			<section class="infoSection container">
				<h2 class="infoSection-titulo">Cadastro de Livro</h2>
			</section>
		</main>
	
		<div class="main">
			<h:form prependId="false" enctype="multipart/form-data">
				<h:messages />
			
				<div class="section pt-0">
					<div class="section__header">
						<div class="layout-flex layout-flex--tight-vertical layout-flex--loose-horizontal layout-flex--wrap">
							<h2 class="section__title layout-flex__item layout-flex__item--stretch">Informações do Livro</h2>
						</div>
					</div>
				
					<div class="section__content">
						<div class="fieldset">
							<div class="field field--required">
								<label class="field__label" for="title">Título</label>
								<div class="field__input-wrapper">
									<input type="text" jsf:id="title" jsf:value="#{adminBooksBean.book.title}" 
									   	   placeholder="Título" class="field__input" />
								</div>
							</div>
							
							<div class="field field--required">
								<label class="field__label" for="subtitle">Subtítulo</label>
								<div class="field__input-wrapper">
									<input type="text" jsf:id="subtitle" jsf:value="#{adminBooksBean.book.subtitle}" 
									   	   placeholder="Subtítulo" class="field__input" />
								</div>
							</div>
							
							<div class="field field--required">
								<label class="field__label" for="description">Descrição</label>
								<div class="field__input-wrapper">
									<textarea rows="3" cols="5" jsf:id="description" jsf:value="#{adminBooksBean.book.description}" 
									   	   placeholder="Descrição" class="field__input"  />
								</div>
							</div>
							
							<div class="field--half field field--required">
								<label class="field__label" for="pages">N° de Páginas</label>
								<div class="field__input-wrapper">
									<input type="text" jsf:id="pages" jsf:value="#{adminBooksBean.book.numberOfPages}" 
									   	   placeholder="N° de Páginas" class="field__input"  />
								</div>
							</div>
							
							<div class="field--half field field--required">
								<label class="field__label" for="releaseDate">Data de Lançamento</label>
								<div class="field__input-wrapper">
									<h:inputText pt:type="date" id="releaseDate" value="#{adminBooksBean.book.releaseDate}" 
									   	     pt:placeholder="Data de Lançamento" styleClass="field__input">
										<f:convertDateTime pattern="yyyy-MM-dd" />
									</h:inputText>
								</div>
							</div>
							
							<div class="field--half field field--required">
								<label class="field__label" for="pages">Preço</label>
								<div class="field__input-wrapper">
									<h:inputText id="price" value="#{adminBooksBean.book.price}" 
									   	pt:placeholder="Preço" styleClass="field__input">
										<f:convertNumber pattern="#,##0.00" />
									</h:inputText>	  
								</div>
							</div>
							
							<div class="field--half field field--required">
								<div class="field__input-wrapper field__input-wrapper--select">
									<label class="field__label" for="pages">Categoria</label>
									<div class="field__input-wrapper field__input-wrapper--select">
										<h:selectOneMenu id="category" value="#{adminBooksBean.book.category}" 
											styleClass="field__input" pt:placeholder="Categoria">
											<f:selectItems value="#{adminBooksBean.categories}" var="category"
												itemLabel="#{category.description}" itemValue="#{category}" />
										</h:selectOneMenu>
									</div>
									<div class="field__caret">
										
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="section">
					<div class="section__header">
						<div class="layout-flex layout-flex--tight-vertical layout-flex--loose-horizontal layout-flex--wrap">
							<h2 class="section__title layout-flex__item layout-flex__item--stretch">Capa</h2>
						</div>
					</div>
					
					<h:inputFile id="cover" value="#{adminBooksBean.cover}" />
				</div>
				
				<div class="section">
					<div class="section__header">
						<div class="layout-flex layout-flex--tight-vertical layout-flex--loose-horizontal layout-flex--wrap">
							<h2 class="section__title layout-flex__item layout-flex__item--stretch">Autores</h2>
						</div>
					</div>
					
					<h:selectManyCheckbox value="#{adminBooksBean.selectedAuthorsIds}" converter="javax.faces.Integer"
						layout="pageDirection" styleClass="select-many-checkbox">
						<f:selectItems value="#{adminBooksBean.authors}" var="author" 
							itemLabel="#{author.name}" itemValue="#{author.id}"  />
					</h:selectManyCheckbox>
				</div>

				<div class="button__footer">
					<h:commandButton value="Salvar" action="#{adminBooksBean.save}" styleClass="btn" />
					<a href="#{request.contextPath}/books/list.xhtml">Voltar a pesquisa</a>
				</div>
			</h:form>
		</div>
	</ui:define>
</ui:composition>
